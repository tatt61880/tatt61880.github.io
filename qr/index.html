<!DOCTYPE html>
<html>
<head>
<title>QR</title>

<meta charset="UTF-8">
<meta name="viewport" content="width=460">
<link rel="shortcut icon" href="./images/favicon.png" />
<link rel="apple-touch-icon" sizes="180x180" href="./images/apple-touch-icon.png">
<link rel="stylesheet" href="./css/style.css">
<script src="./js/jquery.min.js"></script>
<script src="./js/jquery.qrcode.js"></script>
<script src="./js/qrcode.js"></script>
</head>

<body>
<div id="contents">

<input type="text" value="" id="input-text" style="width: 350px; margin-bottom: 20px; font-size: 16px;">

<div id="qrcode"></div>
<div><img id="newImg"></div>

<script>
  $('#input-text').change(updateQrcode);
  $(document).keyup(updateQrcode);
  $(document).mouseup(updateQrcode);
  updateQrcode();

  function updateQrcode() {
    const inputText = $('#input-text').val();
    jQuery('#qrcode').qrcode({
      text  : inputText,
      width : 300,
      height : 300,
    });
    canvasToImg();
  }

  function canvasToImg() {
    const cvs = document.getElementById('canvas');
    const png = cvs.toDataURL();
    $('#newImg').attr('src', png);
    $('#newImg').css('border', '1px solid #000088');
    $('#canvas').parent().empty();
  }
</script>

</div>
</body>
</html>
